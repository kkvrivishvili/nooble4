#================================================================================
# APPLICATION ENVIRONMENT
#================================================================================
# Basic environment configuration
ENVIRONMENT="development"  # Options: development, staging, production
LOG_LEVEL="INFO"           # Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
SERVICE_NAME="nooble4"     # Main service name
SERVICE_VERSION="0.1.0"    # Application version
ENABLE_TELEMETRY="false"   # Enable telemetry and distributed tracing

#================================================================================
# SERVICE PORTS
#================================================================================
# Ports for each service (mapped to host ports in docker-compose.yml)
AGENT_ORCHESTRATOR_PORT=8001
QUERY_SERVICE_PORT=8000
INGESTION_SERVICE_PORT=8002
AGENT_MANAGEMENT_PORT=8003
CONVERSATION_SERVICE_PORT=8004
AGENT_EXECUTION_PORT=8005
EMBEDDING_SERVICE_PORT=8006

#================================================================================
# SERVICE URLS FOR INTER-SERVICE COMMUNICATION
# Use service names for Docker internal networking
#================================================================================
# Internal Docker network URLs (for container-to-container communication)
AGENT_ORCHESTRATOR_URL="http://agent_orchestrator_service:8001"
QUERY_SERVICE_URL="http://query_service:8000"
INGESTION_SERVICE_URL="http://ingestion_service:8002"
AGENT_MANAGEMENT_URL="http://agent_management_service:8003"
CONVERSATION_SERVICE_URL="http://conversation_service:8004"
AGENT_EXECUTION_URL="http://agent_execution_service:8005"
EMBEDDING_SERVICE_URL="http://embedding_service:8006"

#================================================================================
# REDIS CONFIGURATION
#================================================================================
# Connection settings
REDIS_URL="redis://redis:6379"
REDIS_PASSWORD=""
REDIS_DECODE_RESPONSES="true"
REDIS_SOCKET_CONNECT_TIMEOUT=5
REDIS_SOCKET_KEEPALIVE="true"
REDIS_MAX_CONNECTIONS=10
REDIS_HEALTH_CHECK_INTERVAL=30

#================================================================================
# QDRANT CONFIGURATION
#================================================================================
# Qdrant vector database settings
QDRANT_URL="http://qdrant:6333"
QDRANT_API_KEY=""
QDRANT_PORT=6333
QDRANT_HTTP_PORT=6334
QDRANT_ALLOW_RECOVERY_MODE=true

#================================================================================
# POSTGRES CONFIGURATION
#================================================================================
# PostgreSQL database settings
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=nooble
POSTGRES_URL="postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}"

# Configuración para Kong - Base de datos
KONG_PG_USER=kong
KONG_PG_PASSWORD=kong123
KONG_PG_DATABASE=kong
KONG_PG_HOST=${POSTGRES_HOST}
KONG_PG_PORT=${POSTGRES_PORT}

# Configuración para Konga - Base de datos
KONGA_DATABASE_URI="postgresql://${KONGA_DB_USER:-konga}:${KONGA_DB_PASSWORD:-konga123}@${POSTGRES_HOST}:${POSTGRES_PORT}/${KONGA_DB_DATABASE:-konga}"
KONGA_KONG_URL=http://kong:${KONG_ADMIN_PORT:-8001}

# Configuración para pgAdmin
PGADMIN_DEFAULT_EMAIL=admin@nooble4.local
PGADMIN_DEFAULT_PASSWORD=admin123
PGADMIN_PORT=5050

# Configuración para Keycloak
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin123
KEYCLOAK_DB=keycloak
KEYCLOAK_DB_USER=keycloak
KEYCLOAK_DB_PASSWORD=keycloak123
KEYCLOAK_HOSTNAME=keycloak
KEYCLOAK_PORT=8080

# Configuración para Kong
KONG_PROXY_PORT=8000
KONG_PROXY_SSL_PORT=8443
KONG_ADMIN_PORT=8001
KONG_ADMIN_SSL_PORT=8444
KONG_PLUGINS=bundled,keycloak

# Configuración para Konga
KONGA_PORT=1337
KONGA_ENV=development
KONGA_TOKEN_SECRET=some-secret-token
KONGA_DB_USER=konga
KONGA_DB_PASSWORD=konga123
KONGA_DB_DATABASE=konga
KONGA_ADMIN_EMAIL=admin@nooble4.local
KONGA_ADMIN_PASSWORD=admin1234
KONGA_LOG_LEVEL=info

# Configuración para Redis
REDIS_PORT=6379
REDIS_PASSWORD=redis123
REDIS_MAX_MEMORY=256mb

# Configuración para Qdrant
QDRANT_PORT=6333
QDRANT_HTTP_PORT=6334
QDRANT_API_KEY=qdrant123

# Configuración de red
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

#================================================================================
# SECURITY CONFIGURATION
#================================================================================
# JWT Authentication settings
JWT_SECRET_KEY="your-256-bit-secret-key-change-this-in-production"
JWT_ALGORITHM="HS256"
JWT_ACCESS_TOKEN_EXPIRE_MINUTES="30"
JWT_REFRESH_TOKEN_EXPIRE_DAYS="7"

# Rate limiting
RATE_LIMIT_REQUESTS="100"
RATE_LIMIT_PERIOD_SECONDS="60"

# API Security
API_KEY_HEADER="X-API-Key"
API_KEY=""

# Session settings
SESSION_SECRET_KEY="your-session-secret-key-change-this-in-production"
SESSION_COOKIE_NAME="session_id"
SESSION_COOKIE_HTTPONLY="true"
SESSION_COOKIE_SECURE="false"
SESSION_COOKIE_SAMESITE="lax"
SESSION_COOKIE_MAX_AGE="86400"  # 1 day in seconds

# Password hashing
PASSWORD_HASH_ALGORITHM="bcrypt"
PASSWORD_HASH_ROUNDS="12"

#================================================================================
# CORS CONFIGURATION
#================================================================================
# CORS settings for web applications
CORS_ORIGINS="http://localhost:3000,http://localhost:8080"
CORS_METHODS="GET,POST,PUT,DELETE,OPTIONS"
CORS_HEADERS="Content-Type,Authorization"
CORS_CREDENTIALS="true"
CORS_MAX_AGE="600"

#================================================================================
# OPENAI CONFIGURATION
#================================================================================
# OpenAI API settings
OPENAI_API_KEY=""
OPENAI_BASE_URL="https://api.openai.com/v1"
OPENAI_TIMEOUT_SECONDS=30
OPENAI_MAX_RETRIES=3

#================================================================================
# GROQ CONFIGURATION
#================================================================================
# Groq API settings
GROQ_API_KEY=""
GROQ_BASE_URL="https://api.groq.com/openai/v1"
GROQ_TIMEOUT_SECONDS=30
GROQ_MAX_RETRIES=3

#================================================================================
# CONFIGURACIÓN DE WORKERS
#================================================================================
WORKER_COUNT=5  # Número de workers por servicio

# Tiempos de espera (en segundos)
SERVICE_STARTUP_TIMEOUT=120
HEALTHCHECK_RETRIES=3
HEALTHCHECK_INTERVAL=30
HEALTHCHECK_START_PERIOD=60

#================================================================================
# LOGGING CONFIGURATION
#================================================================================
# Logging settings
LOG_LEVEL="INFO"
LOG_FORMAT="json"  # Options: json, text
LOG_DATE_FORMAT="%Y-%m-%d %H:%M:%S"
LOG_LEVEL_FILE="INFO"
LOG_LEVEL_CONSOLE="DEBUG"
LOG_FILE_PATH="/var/log/nooble4/app.log"
LOG_MAX_BYTES=10485760  # 10MB
LOG_BACKUP_COUNT=5
LOG_USE_JSON="true"

# Sentry configuration (for error tracking)
SENTRY_DSN=""
SENTRY_ENVIRONMENT="development"
SENTRY_TRACES_SAMPLE_RATE="1.0"
SENTRY_PROFILES_SAMPLE_RATE="1.0"

#================================================================================
# MONITORING CONFIGURATION
#================================================================================
# Metrics and monitoring settings
ENABLE_METRICS="false"
METRICS_PORT="9100"
PROMETHEUS_MULTIPROC_DIR="/tmp/prometheus"

# Health check settings
HEALTH_CHECK_PATH="/health"
HEALTH_CHECK_INTERVAL="30"
HEALTH_CHECK_TIMEOUT="5"

# Performance monitoring
ENABLE_PROFILING="false"
PROFILING_DIR="profiles"
PROFILING_INTERVAL="60.0"

# Distributed tracing
ENABLE_TRACING="false"
TRACING_SERVICE_NAME="nooble4"
TRACING_AGENT_HOST="localhost"
TRACING_AGENT_PORT="6831"
TRACING_SAMPLER_TYPE="const"
TRACING_SAMPLER_PARAM="1"

#================================================================================
# SECURITY CONFIGURATION
#================================================================================
JWT_SECRET_KEY="cambia-esto-por-una-clave-segura"
JWT_ALGORITHM="HS256"
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=1440  # 24 horas
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# Configuración de rate limiting
RATE_LIMIT_DEFAULT="1000 per day"
RATE_LIMIT_AUTHENTICATED="10000 per day"
RATE_LIMIT_ANONYMOUS="100 per day"

# Configuración de caché
CACHE_TTL=300  # 5 minutos
CACHE_MAX_SIZE=1000

# Configuración de sesiones
SESSION_SECRET_KEY="cambia-esto-por-otra-clave-segura"
SESSION_COOKIE_NAME="nooble4_session"
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SECURE=false  # Cambiar a true en producción con HTTPS
SESSION_COOKIE_SAMESITE="lax"
