#================================================================================
# ENTORNO DE APLICACIÓN
#================================================================================
# Configuración básica del entorno
ENVIRONMENT="development"  # Opciones: development, staging, production
LOG_LEVEL="DEBUG"          # Opciones: DEBUG, INFO, WARNING, ERROR, CRITICAL
ENABLE_TELEMETRY=False
SERVICE_NAME="nooble4"     # Nombre del servicio principal
SERVICE_VERSION="1.0.0"   # Versión de la aplicación

#================================================================================
# CONFIGURACIÓN DE PUERTOS DE SERVICIOS
#================================================================================
AGENT_ORCHESTRATOR_PORT=8001
QUERY_SERVICE_PORT=8000
INGESTION_SERVICE_PORT=8002
AGENT_MANAGEMENT_PORT=8003
CONVERSATION_SERVICE_PORT=8004
AGENT_EXECUTION_PORT=8005
EMBEDDING_SERVICE_PORT=8006

#================================================================================
# URLS PARA COMUNICACIÓN ENTRE SERVICIOS (DENTRO DE DOCKER)
# Usar los nombres de servicio definidos en docker-compose.yml
#================================================================================
AGENT_ORCHESTRATOR_URL="http://agent_orchestrator_service:8001"
QUERY_SERVICE_URL="http://query_service:8000"
INGESTION_SERVICE_URL="http://ingestion_service:8002"
AGENT_MANAGEMENT_URL="http://agent_management_service:8003"
CONVERSATION_SERVICE_URL="http://conversation_service:8004"
AGENT_EXECUTION_URL="http://agent_execution_service:8005"
EMBEDDING_SERVICE_URL="http://embedding_service:8006"

#================================================================================
# CONFIGURACIÓN DE REDIS
#================================================================================
REDIS_URL="redis://redis_database:6379"
REDIS_PASSWORD=
REDIS_DECODE_RESPONSES=True
REDIS_SOCKET_CONNECT_TIMEOUT=5
REDIS_SOCKET_KEEPALIVE=True
REDIS_MAX_CONNECTIONS=50
REDIS_HEALTH_CHECK_INTERVAL=30

#================================================================================
# CONFIGURACIÓN DE QDRANT
#================================================================================
QDRANT_URL="http://qdrant_database:6333"
QDRANT_API_KEY=

#================================================================================
# CONFIGURACIÓN DE POSTGRES
#================================================================================
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=nooble
POSTGRES_URL="postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}"

# Configuración para Kong - Base de datos
KONG_PG_USER=kong
KONG_PG_PASSWORD=kong123
KONG_PG_DATABASE=kong
KONG_PG_HOST=${POSTGRES_HOST}
KONG_PG_PORT=${POSTGRES_PORT}

# Configuración para Konga - Base de datos
KONGA_DATABASE_URI="postgresql://${KONGA_DB_USER:-konga}:${KONGA_DB_PASSWORD:-konga123}@${POSTGRES_HOST}:${POSTGRES_PORT}/${KONGA_DB_DATABASE:-konga}"
KONGA_KONG_URL=http://kong:${KONG_ADMIN_PORT:-8001}

# Configuración para pgAdmin
PGADMIN_DEFAULT_EMAIL=admin@nooble4.local
PGADMIN_DEFAULT_PASSWORD=admin123
PGADMIN_PORT=5050

# Configuración para Keycloak
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin123
KEYCLOAK_DB=keycloak
KEYCLOAK_DB_USER=keycloak
KEYCLOAK_DB_PASSWORD=keycloak123
KEYCLOAK_HOSTNAME=keycloak
KEYCLOAK_PORT=8080

# Configuración para Kong
KONG_PROXY_PORT=8000
KONG_PROXY_SSL_PORT=8443
KONG_ADMIN_PORT=8001
KONG_ADMIN_SSL_PORT=8444
KONG_PLUGINS=bundled,keycloak

# Configuración para Konga
KONGA_PORT=1337
KONGA_ENV=development
KONGA_TOKEN_SECRET=some-secret-token
KONGA_DB_USER=konga
KONGA_DB_PASSWORD=konga123
KONGA_DB_DATABASE=konga
KONGA_ADMIN_EMAIL=admin@nooble4.local
KONGA_ADMIN_PASSWORD=admin1234
KONGA_LOG_LEVEL=info

# Configuración para Redis
REDIS_PORT=6379
REDIS_PASSWORD=redis123
REDIS_MAX_MEMORY=256mb

# Configuración para Qdrant
QDRANT_PORT=6333
QDRANT_HTTP_PORT=6334
QDRANT_API_KEY=qdrant123

# Configuración de red
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

#================================================================================
# CONFIGURACIÓN DE APIS EXTERNAS
#================================================================================
# Introduce tus claves de API aquí
OPENAI_API_KEY="TU_API_KEY_DE_OPENAI"
OPENAI_BASE_URL=

GROQ_API_KEY="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"

#================================================================================
# CONFIGURACIÓN DE CORS
#================================================================================
CORS_ORIGINS='["*"]'  # Lista en formato JSON, ej: '["http://localhost:3000","https://mi-app.com"]'

# Configuración de Workers
WORKER_COUNT=5  # Número de workers por servicio

# Tiempos de espera (en segundos)
SERVICE_STARTUP_TIMEOUT=120
HEALTHCHECK_RETRIES=3
HEALTHCHECK_INTERVAL=30
HEALTHCHECK_START_PERIOD=60

# Configuración de logs
LOG_FORMAT="json"  # Opciones: json, text
LOG_LEVEL_FILE="INFO"
LOG_LEVEL_CONSOLE="DEBUG"
LOG_FILE_PATH="/var/log/nooble4"

# Configuración de seguridad
JWT_SECRET_KEY="cambia-esto-por-una-clave-segura"
JWT_ALGORITHM="HS256"
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=1440  # 24 horas
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# Configuración de rate limiting
RATE_LIMIT_DEFAULT="1000 per day"
RATE_LIMIT_AUTHENTICATED="10000 per day"
RATE_LIMIT_ANONYMOUS="100 per day"

# Configuración de caché
CACHE_TTL=300  # 5 minutos
CACHE_MAX_SIZE=1000

# Configuración de sesiones
SESSION_SECRET_KEY="cambia-esto-por-otra-clave-segura"
SESSION_COOKIE_NAME="nooble4_session"
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SECURE=false  # Cambiar a true en producción con HTTPS
SESSION_COOKIE_SAMESITE="lax"
